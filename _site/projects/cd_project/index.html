<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>CrunchDAO quant finance competitions | James T. Glazar</title>
    <meta name="author" content="James T. Glazar" />
    <meta name="description" content="Creating prediction engines for a long-short hedge fund" />


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light" />

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öõÔ∏è</text></svg>">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="http://localhost:4000/projects/cd_project/">
    
    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark" />

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    

  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">James¬†</span>T.¬†Glazar</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">about</a>
              </li>
              

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/resume/">resume</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/projects/">projects</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/teaching/">teaching</a>
              </li>

              <!-- Toogle theme mode -->
              <li class="toggle-container">
                <button id="light-toggle" title="Change theme">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Scrolling Progress Bar -->
      <progress id="progress" value="0">
        <div class="progress-container">
          <span class="progress-bar"></span>
        </div>
      </progress>
    </header>


    <!-- Content -->
    <div class="container mt-5">
      <!-- page.html -->
        <div class="post">

          <header class="post-header">
            <h1 class="post-title">CrunchDAO quant finance competitions</h1>
            <p class="post-description">Creating prediction engines for a long-short hedge fund</p>
          </header>

          <article>
            <p>After <a href="../wq_project/">competing in WorldQuant International Quant
Championship</a>, I got a LinkedIn message from Jean Herelle at
<a href="https://www.crunchdao.com" target="_blank" rel="noopener noreferrer">CrunchDAO</a>. He asked me if I had heard about
CrunchDAO‚Äôs <a href="https://adialab.crunchdao.com/" target="_blank" rel="noopener noreferrer">üìà ADIALab Market Prediction
Competition</a>, a quant finance tournament in
which participants predict stock price movements using hundreds of variables
over time.</p>

<p>Eager to learn more about time series modeling and modern quant finance
techniques, I gladly signed up and dug into the data. I developed a model after
a few weeks and submitted my code just before the deadline.</p>

<p>I‚Äôm happy to share that so far I placed <strong>32/4407 (top 0.8%)</strong> in the world! This
rank will update week-to-week as new market data is processed until the
competition‚Äôs end in November. I‚Äôm excited to see where I finally place! ü•≥</p>

<p>I had so much fun competing that I signed up for CrunchDAO‚Äôs other quant
competition, the weekly <a href="https://tournament.crunchdao.com" target="_blank" rel="noopener noreferrer">DataCrunch
tournament</a>. DataCrunch is a rolling
tournament in which participants model new market data as it comes in
week-to-week. This gave me an opportunity to refine my modeling and development
pipeline, specifically using more rigorous time series cross validation methods.</p>

<h2 id="how-crunchdao-works">How CrunchDAO works</h2>

<p>CrunchDAO is a decentralized autonomous organization that crowdsources data
science tasks across its members. The DAO primarily works alongside financial
institutions to provide signals for automated trading. The basic pipeline is
shown below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Researchers provide models ‚û°Ô∏è CrunchDAO aggregates into a trading signal ‚û°Ô∏è
financial institutions execute transactions

Financial institutions profit ‚û°Ô∏è CrunchDAO distributes earnings ‚û°Ô∏è researchers
get rewarded
</code></pre></div></div>

<p>You can watch a nice explanation <a href="https://www.youtube.com/watch?v=30h6A7MiEDk" target="_blank" rel="noopener noreferrer">üé• here</a></p>

<p>Financial institutions use these predictions to rank stocks in a basket. They
buy top-ranked stocks and short-sell bottom-ranked stocks, creating a net
neutral portfolio. This is called a ‚Äúlong-short‚Äù strategy.</p>

<p>CrunchDAO is the best quant competition I‚Äôve found so far. The opportunity to
work with real financial data, develop machine learning models, interact with
professional quants, and compete with thousands of like-minded people is
amazing! The CrunchDAO crew has been super welcoming and helpful to new members
like myself, and they‚Äôre constantly improving the platform. I highly recommend
CrunchDAO if you‚Äôre interested in quant finance or machine learning! ü§ó</p>

<h2 id="the-data">The data</h2>

<p>CrunchDAO preprocesses and anonymizes its data to encourage participants to use
purely statistical models without reference to economic principles. The data
has the following format, with thousands of rows of data:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>| time | feature 1 | feature 2 | ... | feature 600 | returns |
|------|-----------|-----------|-----|-------------|---------|
| 1    | 0.2       | 1.1       | ... | -0.5        | 2.2     |
| 1    | -1.3      | 0.1       | ... | 0.3         | -1.1    |
| 2    | 0.9       | -0.9      | ... | 1.2         | 0.3     |
</code></pre></div></div>

<p>Researchers analyze the provided data to create statistical models predicting
returns. Models are evaluated by the <a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient" target="_blank" rel="noopener noreferrer">Spearman rank correlation</a>
between their return prediction and the actual returns observed in the market.
This rewards models that accurately predict which stocks will be at the top and
bottom of the basket in a given time period.</p>

<h2 id="my-models">My models</h2>

<h3 id="adialab-competition">ADIALab competition</h3>

<p>I started my journey by working through the <a href="https://github.com/crunchdao/adialab-notebooks" target="_blank" rel="noopener noreferrer">üìî Jupyter notebooks</a>
provided by the CrunchDAO crew. I also connected with staff and other
participants on the CrunchDAO Discord channel and read up on <a href="https://www.google.com/books/edition/Time_Series_Analysis_and_Its_Application/sfFdDwAAQBAJ?hl=en&amp;gbpv=0" target="_blank" rel="noopener noreferrer">modern time series
regression</a> and <a href="https://www.google.com/books/edition/The_Elements_of_Statistical_Learning/yPfZBwAAQBAJ?hl=en&amp;gbpv=0" target="_blank" rel="noopener noreferrer">statistical learning</a> techniques.</p>

<p>My data exploration and model development for the ADIALab competition is
detailed in this <a href="https://drive.google.com/file/d/1eIQu0D8pY4dR1Xurzmbi0BP8WimYrMM8/view?usp=sharing" target="_blank" rel="noopener noreferrer">üìî Jupyter notebook</a>. In short, I created a
simple linear regression model that provides moderate but stable accuracy over
time. The model uses <a href="https://en.wikipedia.org/wiki/Elastic_net_regularization" target="_blank" rel="noopener noreferrer">üï∏Ô∏è elastic net regularization</a> to prevent
overfitting the model to noise. Basic cross validation on a holdout dataset 
found optimal hyperparameters, and simple trial-and-error with the retraining
rate indicated I should retrain the model every 4 time periods as new data comes
in.</p>

<h3 id="datacrunch-tournament">DataCrunch tournament</h3>

<p>After squeezing in my final submission for the ADIALab tournament just before the
deadline, I turned my attention to the DataCrunch tournament. I implemented a
more robust cross validation technique for the elastic net and explored a wider
range of hyperparameter values. This <a href="https://drive.google.com/file/d/1pJc1KKpvtl7nlzfwIVtTqFyNmd7IlKoq/view?usp=sharing" target="_blank" rel="noopener noreferrer">üìî Jupyter notebook</a> shows
the code and data analysis for my DataCrunch models.</p>

<p>I implemented a conservative and an aggressive cross validation method to find
optimal hyperparameters ‚Äì see Section 1 in the notebook for details. In the
end, I used aggressive method in order to leverage time series autocorrelation
between the end of the training data and beginning of the test data.</p>

<p>The graph below shows an example of tuning both the lookback training period and
elastic net L1 ratio to maximize Spearman correlation in the aggressive CV
method. The graph shows fairly smooth behavior, indicating our CV method
performs stably. The optimal hyperparameters found with the simple grid search
are clear winners compared to the rest.</p>

<div class="row">
    <div class="col-sm mt-3 mt-md-0">
    </div>
    <div class="col-sm mt-3 mt-md-0">
        <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/cd-project_crossval.jpg" class="img-fluid rounded z-depth-1" width="500" height="auto" title="cross validation of lookback period and L1 ratio" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">

  </picture>

</figure>

    </div>
    <div class="col-sm mt-3 mt-md-0">
    </div>
</div>
<div class="caption"> Spearman correlation score vs. lookback period for the
elastic net with `alpha=0.0001` found via the aggressive cross validation
strategy. Colors indicate values of `L1 ratio` parameter which tunes L1 vs. L2
regularization. Brighter colors indicate higher ratio (bounded between 0 and 1).
The graph shows a smooth trend with a clear optimum, indicating stability in our
cross validation technique. </div>

<h2 id="performance">Performance</h2>

<p>My elastic net model‚Äôs performance in the ADIALab competition is shown below.
The red data indicates my performance on the training dataset, and the blue data
indicates my performance on the test data. Luckily, my elastic net model
generalizes well to new data and has generated fantastic performance recently!</p>

<p>Each week until mid-November will bring new market data, so I won‚Äôt know my
final ranking until then. For now, I‚Äôm ranked 32/4407! üéâ</p>

<p><img src="/assets/img/cd-project_performance.jpg" width="800"></p>

<p>The performance in the DataCrunch competition is ongoing and follows a <a href="https://docs.crunchdao.com/datacrunch-tournament/scoring/live-score-computation-process" target="_blank" rel="noopener noreferrer">more
complicated evaluation methodology</a>. Right now I am ranked
125/4407, but that will increase as my model is evaluated on new data. üöÄ</p>

<h2 id="conclusion">Conclusion</h2>

<p>The past few months have been a blast as I‚Äôve learned about quant finance
prediction models, time series regression, cross validation strategies, and
elastic net regularization. I‚Äôm so glad Jean reached out to let me know about
CrunchDAO! üôè I highly recommend checking out their competition if you‚Äôre
interested in quant finance or machine learning in general.</p>

<p>These competitions taught me a very important lesson in data science: <strong>simplicity
and robustness are paramount!</strong> I was quite surprised to see my elastic net
linear regression models rise from the top 150 of the training leaderboard to
the top 40 of the test leaderboard üìà. Early in the competition, I read reports
from competitors who used neural networks, decision trees, and complex
ensembling techniques for their models. It was unfortunate to see some of these
folks fall from the top 50 to the top 500 as new data arrived üìâ. I can only
imagine how much time they dedicated to training these models. In the end, they
overfit the training data ‚Äì a classic mistake that‚Äôs hard to avoid! This taught
me to stick
with simple models with few hyperparamaters, focusing on robust cross validation
to ensure good generalization.</p>

<p>Quant funds need much more than just a prediction engine. They also need a
risk management system, a trading execution algorithm, a market impact
model, and more. I look forward to learning more about these topics next! Reach
out via LinkedIn or email if you know of any competitions that test these
skills.</p>


          </article>

        </div>

    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        ¬© Copyright 2024 James T. Glazar. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>.

      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script defer src="/assets/js/zoom.js"></script><!-- Load Common JS -->
  <script defer src="/assets/js/common.js"></script>

    <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    
    

<!-- Scrolling Progress Bar -->
<script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": navbarHeight });
    $("progress-container").css({ "padding-top": navbarHeight });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script>

  </body>
</html>
